var Goo=function(e){function h(){if(a.fullscreen){var b=window.innerWidth,c=window.innerHeight;a.canvas.width!=b&&(a.canvas.width=b);a.canvas.height!=c&&(a.canvas.height=c)}b=k();if(a.onDraw)a.onDraw(a,b);if(a.animate){if(60<f++){a.fps=1E3*(f/(b-l));if(a.onFrameRate)a.onFrameRate(a);f=0;l=b}m(h)}}var a=this;a.type="2d";a.animate=!0;a.fullscreen=!1;a.keysDown={};a.userData={};if(e)for(var g in e)e.hasOwnProperty(g)&&(a[g]=e[g]);a.canvas=document.createElement("canvas");a.canvas&&(a.ctx=a.canvas.getContext(a.type));
if(!a.canvas||!a.ctx&&a.onFailure)a.onFailure();else{a.canvas.width=a.width;a.canvas.height=a.height;a.__defineGetter__&&a.__defineSetter__?(a.__defineGetter__("width",function(){return a.canvas.width}),a.__defineSetter__("width",function(b){a.canvas.width=b}),a.__defineGetter__("height",function(){return a.canvas.height}),a.__defineSetter__("height",function(b){a.canvas.height=b})):Object.defineProperty&&(Object.defineProperty(a,"width",{get:function(){return a.canvas.width},set:function(b){a.canvas.width=
b}}),Object.defineProperty(a,"height",{get:function(){return a.canvas.height},set:function(b){a.canvas.height=b}}));a.fullscreen&&(a.container=document.body,document.body.style.margin="0px",document.body.style.padding="0px",document.body.style.overflow="hidden");a.container&&a.container.appendChild(a.canvas);var m=function(){var a=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;a||(a=function(a){window.setTimeout(a,
1E3/30)});return a}(),k=Date.now?Date.now:function(){return(new Date).getTime()};a.updateMouse=function(a,c){for(var d=this.canvas;d;)c-=d.offsetTop,a-=d.offsetLeft,d=d.offsetParent;this.prevMouseX=this.mouseX;this.prevMouseY=this.mouseY;this.mouseX=a;this.mouseY=c};document.addEventListener("mousedown",function(b){if(b.target==a.canvas){a.updateMouse(b.pageX,b.pageY);if(a.onMouseDown)a.onMouseDown(a);a.dragging=!0}},!1);document.addEventListener("mouseup",function(b){if(a.dragging){a.updateMouse(b.pageX,
b.pageY);if(a.onMouseUp)a.onMouseUp(a);a.dragging=!1}},!1);document.addEventListener("mousemove",function(b){a.updateMouse(b.pageX,b.pageY);if(a.mouseX!=a.prevMouseX||a.mouseY!=a.prevMouseY)if(a.dragging&&a.onMouseDrag)a.onMouseDrag(a);else if(a.onMouseMove&&b.target==a.canvas)a.onMouseMove(a)},!1);document.addEventListener("touchstart",function(b){if(b.target==a.canvas){a.updateMouse(b.pageX,b.pageY);if(a.onMouseDown)a.onMouseDown(a);a.dragging=!0}},!1);document.addEventListener("touchend",function(b){if(a.onMouseUp)a.onMouseUp(a);
a.dragging=!1},!1);document.addEventListener("touchmove",function(b){a.dragging&&(a.updateMouse(b.pageX,b.pageY),a.onMouseDrag(a),b.preventDefault())},!1);document.addEventListener("click",function(b){a.updateMouse(b.pageX,b.pageY);if(a.onMouseClick)a.onMouseClick(a)},!1);document.addEventListener("keydown",function(b){a.keyCode=b.keyCode;a.key=String.fromCharCode(a.keyCode);a.keysDown[a.keyCode]=!0;if(a.onKeyDown)a.onKeyDown(a)},!1);document.addEventListener("keyup",function(b){a.keyCode=b.keyCode;
a.key=String.fromCharCode(a.keyCode);delete a.keysDown[a.keyCode];if(a.onKeyUp)a.onKeyUp(a)},!1);document.addEventListener("keypress",function(b){a.keyCode=b.keyCode;a.key=String.fromCharCode(a.keyCode);if(a.onKeyPress)a.onKeyPress(a)},!1);var f=0,l=k();m(h)}};
